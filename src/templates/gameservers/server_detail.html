{% extends "base_site.html" %}
{% load staticfiles %}
{% load server_utils %}

{% block title %}
    {{server}}
{% endblock %}

{% block content %}
    <h1>{{server}}</h1>

    <a class="btn btn-default" href="{{server.game_url}}" rel="nofollow">Launch game</a>
    {% if server.site_url %}
        <a class="btn btn-default" href="{{server.site_url}}" rel="nofollow">Homepage</a>
    {% else %}
        <button class="btn btn-default">No homepage</button>
    {% endif %}

    <h3>Status</h3>
    {% with delta_hours=server.last_updated|hours_since_now %}
        {% if delta_hours > 24 %}
    <p id="server_status" class="status_offline">
        <span title="Offline: was not seen during the last week." class="glyphicon glyphicon-remove-sign"></span>
        {% elif delta_hours >= 1 %}
    <p id="server_status" class="status_unknown">
        <span title="Unknown: was not seen during the last day." class="glyphicon glyphicon-question-sign"></span>
        {% else %}
    <p id="server_status" class="status_online">
        <span title="Online: was seen during the last hour." class="glyphicon glyphicon-ok-sign"></span>
        {% endif %}
    {% endwith %}
        Last seen <span class="bold" title="{{server.last_updated|date:'r'}} GMT">
            {{server.last_updated|timesince}}
        </span>ago.
    </p>

    <h3>Players</h3>
    <table id="player_stats" class="table table-hover">
        <thead>
            <tr>
                <th>Currently online</th>
                <th>Average</th>
                <th>Min</th>
                <th>Max</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>{{server.players_current}}</th>
                <th>{{server.players_avg}}</th>
                <th>{{server.players_min}}</th>
                <th>{{server.players_max}}</th>
            </tr>
    </table>

    <h3>History</h3>
    <img src="{% static 'graphs/' %}week-time-{{graph_file}}.png" />
    <b>Last week (players / hour)</b>
    <br />
    <img src="{% static 'graphs/' %}month-time-{{graph_file}}.png" />
    <b>Last month (players / 6 hours)</b>

    <h3>Average per day</h3>
    <img src="{% static 'graphs/' %}month-avg_day-{{graph_file}}.png" />
    <b>Last month</b>

{% endblock %}

